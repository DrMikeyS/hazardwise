{"version":3,"file":"_page.svelte-Z3styywO.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/workspace/hazard/impact/_page.svelte.js"],"sourcesContent":["import { i as ensure_array_like, b as attr_class, f as attr, n as clsx, a as pop, p as push } from \"../../../../../chunks/index.js\";\nimport \"../../../../../chunks/client2.js\";\nimport \"js-cookie\";\nimport \"../../../../../chunks/client.js\";\nimport { y as escape_html } from \"../../../../../chunks/utils.js\";\nclass DCBRisk {\n  /** Risk‐rating matrix: rows = likelihood 1–5 (VL→VH), cols = severity 1–5 (Minor→Catastrophic) */\n  static matrix = [\n    /* VL (1) */\n    [1, 1, 2, 2, 3],\n    /* L  (2) */\n    [1, 2, 2, 3, 4],\n    /* M  (3) */\n    [2, 2, 3, 3, 4],\n    /* H  (4) */\n    [2, 3, 3, 4, 5],\n    /* VH (5) */\n    [3, 4, 4, 5, 5]\n  ];\n  /** Human‐readable definitions for each rating (1–5) */\n  static ratings = {\n    1: \"Acceptable\",\n    2: \"Acceptable\",\n    3: \"Undesirable\",\n    4: \"Unacceptable Without Further Mitigation\",\n    5: \"Unacceptable\"\n  };\n  /** Human‐readable definitions for each rating (1–5) */\n  static definitions = {\n    1: \"Acceptable, no further action required.\",\n    2: \"Acceptable where cost of further reduction outweighs benefits gained.\",\n    3: \"Undesirable level of risk: attempts should be made to eliminate or control to reduce risk to an acceptable level; shall only be acceptable when further risk reduction is impractical.\",\n    4: \"Mandatory elimination or control to reduce risk to an acceptable level.\",\n    5: \"Unacceptable level of risk.\"\n  };\n  /**\n   * Compute a DCB0160 clinical risk.\n   *\n   * @param likelihood  – integer 1 (Very Low) to 5 (Very High)\n   * @param severity    – integer 1 (Minor) to 5 (Catastrophic)\n   * @returns rating & definition\n   */\n  static assess(likelihood, severity) {\n    if (!Number.isInteger(likelihood) || !Number.isInteger(severity) || likelihood < 1 || likelihood > 5 || severity < 1 || severity > 5) {\n      throw new Error(\"Likelihood and severity must be integers from 1 to 5.\");\n    }\n    const score = DCBRisk.matrix[likelihood - 1][severity - 1];\n    const rating = DCBRisk.ratings[score];\n    const definition = DCBRisk.definitions[score];\n    return { score, rating, definition };\n  }\n}\nfunction _page($$payload, $$props) {\n  push();\n  let rawScore, riskResult;\n  let description = \"\";\n  let severity = \"\";\n  let likelihood = \"\";\n  const severityOptions = [\n    {\n      value: \"Catastrophic\",\n      label: \"Catastrophic\",\n      description: \"Death or permanent major harm\",\n      class: \"table-danger\"\n    },\n    {\n      value: \"Major\",\n      label: \"Major\",\n      description: \"Temporary major harm or permanent minor harm\",\n      class: \"table-warning\"\n    },\n    {\n      value: \"Moderate\",\n      label: \"Moderate\",\n      description: \"Short-term harm requiring intervention\",\n      class: \"table-info\"\n    },\n    {\n      value: \"Minor\",\n      label: \"Minor\",\n      description: \"Minimal harm, may require monitoring\",\n      class: \"\"\n    },\n    {\n      value: \"Negligible\",\n      label: \"Negligible\",\n      description: \"No significant harm\",\n      class: \"table-secondary text-white\"\n    }\n  ];\n  const likelihoodOptions = [\n    {\n      value: \"Almost Certain\",\n      label: \"Almost Certain\",\n      description: \"Expected to occur frequently\",\n      class: \"table-danger\"\n    },\n    {\n      value: \"Likely\",\n      label: \"Likely\",\n      description: \"Will probably occur occasionally\",\n      class: \"table-warning\"\n    },\n    {\n      value: \"Possible\",\n      label: \"Possible\",\n      description: \"Could occur but uncommon\",\n      class: \"table-info\"\n    },\n    {\n      value: \"Unlikely\",\n      label: \"Unlikely\",\n      description: \"Rare but possible\",\n      class: \"\"\n    },\n    {\n      value: \"Rare\",\n      label: \"Rare\",\n      description: \"Exceptional circumstances only\",\n      class: \"table-secondary text-white\"\n    }\n  ];\n  const riskBadgeClasses = {\n    1: \"bg-success text-white\",\n    2: \"bg-info text-dark\",\n    3: \"bg-warning text-dark\",\n    4: \"bg-danger text-white\",\n    5: \"bg-danger text-white\"\n  };\n  const levels = {\n    \"Catastrophic\": 5,\n    \"Major\": 4,\n    \"Moderate\": 3,\n    \"Minor\": 2,\n    \"Negligible\": 1,\n    \"Almost Certain\": 5,\n    \"Likely\": 4,\n    \"Possible\": 3,\n    \"Unlikely\": 2,\n    \"Rare\": 1\n  };\n  rawScore = (levels[severity] || 0) * (levels[likelihood] || 0);\n  riskResult = levels[severity] && levels[likelihood] ? DCBRisk.assess(levels[likelihood], levels[severity]) : null;\n  console.log(\"Risk assessment:\", riskResult, rawScore);\n  const each_array = ensure_array_like(severityOptions);\n  const each_array_1 = ensure_array_like(likelihoodOptions);\n  $$payload.out += `<main class=\"container py-4\"><button class=\"btn btn-link mb-3\">← Back to Hazard</button> <h1 class=\"mb-4\">${escape_html(\"Add Impact\")}</h1> <div class=\"mb-3\"><label for=\"impactDescription\" class=\"form-label\">Impact Description</label> <textarea id=\"impactDescription\" class=\"form-control\" rows=\"3\" placeholder=\"e.g. Incorrect clinical advice leads to unsafe prescription\">`;\n  const $$body = escape_html(description);\n  if ($$body) {\n    $$payload.out += `${$$body}`;\n  }\n  $$payload.out += `</textarea></div> <h5 class=\"mt-4\">Severity</h5> <table class=\"table table-bordered align-middle\"><tbody><!--[-->`;\n  for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n    let option = each_array[$$index];\n    $$payload.out += `<tr${attr_class(clsx(option.class))}><td class=\"text-nowrap\"><input type=\"radio\" name=\"severity\"${attr(\"value\", option.value)}${attr(\"checked\", severity === option.value, true)} class=\"form-check-input me-2\"/> <strong>${escape_html(option.label)}</strong></td><td>${escape_html(option.description)}</td></tr>`;\n  }\n  $$payload.out += `<!--]--></tbody></table> <h5 class=\"mt-4\">Likelihood</h5> <table class=\"table table-bordered align-middle\"><tbody><!--[-->`;\n  for (let $$index_1 = 0, $$length = each_array_1.length; $$index_1 < $$length; $$index_1++) {\n    let option = each_array_1[$$index_1];\n    $$payload.out += `<tr${attr_class(clsx(option.class))}><td class=\"text-nowrap\"><input type=\"radio\" name=\"likelihood\"${attr(\"value\", option.value)}${attr(\"checked\", likelihood === option.value, true)} class=\"form-check-input me-2\"/> <strong>${escape_html(option.label)}</strong></td><td>${escape_html(option.description)}</td></tr>`;\n  }\n  $$payload.out += `<!--]--></tbody></table> `;\n  if (riskResult) {\n    $$payload.out += \"<!--[-->\";\n    $$payload.out += `<div class=\"mt-4\"><h5>Calculated Risk Rating</h5> <div${attr_class(`badge ${riskBadgeClasses[riskResult.score]}`)}>${escape_html(riskResult.rating)} (${escape_html(riskResult.score)} pts)</div> <div class=\"form-text\">${escape_html(riskResult.definition)}</div></div>`;\n  } else {\n    $$payload.out += \"<!--[!-->\";\n  }\n  $$payload.out += `<!--]--> <button class=\"btn btn-success mt-4\">${escape_html(\"Add Impact\")}</button></main>`;\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":";;;;;;AAKA,MAAM,OAAO,CAAC;AACd;AACA,EAAE,OAAO,MAAM,GAAG;AAClB;AACA,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACnB;AACA,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACnB;AACA,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACnB;AACA,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACnB;AACA,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AAClB,GAAG;AACH;AACA,EAAE,OAAO,OAAO,GAAG;AACnB,IAAI,CAAC,EAAE,YAAY;AACnB,IAAI,CAAC,EAAE,YAAY;AACnB,IAAI,CAAC,EAAE,aAAa;AACpB,IAAI,CAAC,EAAE,yCAAyC;AAChD,IAAI,CAAC,EAAE;AACP,GAAG;AACH;AACA,EAAE,OAAO,WAAW,GAAG;AACvB,IAAI,CAAC,EAAE,yCAAyC;AAChD,IAAI,CAAC,EAAE,uEAAuE;AAC9E,IAAI,CAAC,EAAE,wLAAwL;AAC/L,IAAI,CAAC,EAAE,yEAAyE;AAChF,IAAI,CAAC,EAAE;AACP,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,MAAM,CAAC,UAAU,EAAE,QAAQ,EAAE;AACtC,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,UAAU,GAAG,CAAC,IAAI,UAAU,GAAG,CAAC,IAAI,QAAQ,GAAG,CAAC,IAAI,QAAQ,GAAG,CAAC,EAAE;AAC1I,MAAM,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC;AAC9E;AACA,IAAI,MAAM,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC;AAC9D,IAAI,MAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC;AACzC,IAAI,MAAM,UAAU,GAAG,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC;AACjD,IAAI,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE;AACxC;AACA;AACA,SAAS,KAAK,CAAC,SAAS,EAAE,OAAO,EAAE;AACnC,EAAE,IAAI,EAAE;AACR,EAAE,IAAI,QAAQ,EAAE,UAAU;AAC1B,EAAE,IAAI,WAAW,GAAG,EAAE;AACtB,EAAE,IAAI,QAAQ,GAAG,EAAE;AACnB,EAAE,IAAI,UAAU,GAAG,EAAE;AACrB,EAAE,MAAM,eAAe,GAAG;AAC1B,IAAI;AACJ,MAAM,KAAK,EAAE,cAAc;AAC3B,MAAM,KAAK,EAAE,cAAc;AAC3B,MAAM,WAAW,EAAE,+BAA+B;AAClD,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,KAAK,EAAE,OAAO;AACpB,MAAM,KAAK,EAAE,OAAO;AACpB,MAAM,WAAW,EAAE,8CAA8C;AACjE,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,KAAK,EAAE,UAAU;AACvB,MAAM,KAAK,EAAE,UAAU;AACvB,MAAM,WAAW,EAAE,wCAAwC;AAC3D,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,KAAK,EAAE,OAAO;AACpB,MAAM,KAAK,EAAE,OAAO;AACpB,MAAM,WAAW,EAAE,sCAAsC;AACzD,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,KAAK,EAAE,YAAY;AACzB,MAAM,KAAK,EAAE,YAAY;AACzB,MAAM,WAAW,EAAE,qBAAqB;AACxC,MAAM,KAAK,EAAE;AACb;AACA,GAAG;AACH,EAAE,MAAM,iBAAiB,GAAG;AAC5B,IAAI;AACJ,MAAM,KAAK,EAAE,gBAAgB;AAC7B,MAAM,KAAK,EAAE,gBAAgB;AAC7B,MAAM,WAAW,EAAE,8BAA8B;AACjD,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,KAAK,EAAE,QAAQ;AACrB,MAAM,KAAK,EAAE,QAAQ;AACrB,MAAM,WAAW,EAAE,kCAAkC;AACrD,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,KAAK,EAAE,UAAU;AACvB,MAAM,KAAK,EAAE,UAAU;AACvB,MAAM,WAAW,EAAE,0BAA0B;AAC7C,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,KAAK,EAAE,UAAU;AACvB,MAAM,KAAK,EAAE,UAAU;AACvB,MAAM,WAAW,EAAE,mBAAmB;AACtC,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,KAAK,EAAE,MAAM;AACnB,MAAM,KAAK,EAAE,MAAM;AACnB,MAAM,WAAW,EAAE,gCAAgC;AACnD,MAAM,KAAK,EAAE;AACb;AACA,GAAG;AACH,EAAE,MAAM,gBAAgB,GAAG;AAC3B,IAAI,CAAC,EAAE,uBAAuB;AAC9B,IAAI,CAAC,EAAE,mBAAmB;AAC1B,IAAI,CAAC,EAAE,sBAAsB;AAC7B,IAAI,CAAC,EAAE,sBAAsB;AAC7B,IAAI,CAAC,EAAE;AACP,GAAG;AACH,EAAE,MAAM,MAAM,GAAG;AACjB,IAAI,cAAc,EAAE,CAAC;AACrB,IAAI,OAAO,EAAE,CAAC;AACd,IAAI,UAAU,EAAE,CAAC;AACjB,IAAI,OAAO,EAAE,CAAC;AACd,IAAI,YAAY,EAAE,CAAC;AACnB,IAAI,gBAAgB,EAAE,CAAC;AACvB,IAAI,QAAQ,EAAE,CAAC;AACf,IAAI,UAAU,EAAE,CAAC;AACjB,IAAI,UAAU,EAAE,CAAC;AACjB,IAAI,MAAM,EAAE;AACZ,GAAG;AACH,EAAE,QAAQ,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAChE,EAAE,UAAU,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,UAAU,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI;AACnH,EAAE,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,UAAU,EAAE,QAAQ,CAAC;AACvD,EAAE,MAAM,UAAU,GAAG,iBAAiB,CAAC,eAAe,CAAC;AACvD,EAAE,MAAM,YAAY,GAAG,iBAAiB,CAAC,iBAAiB,CAAC;AAC3D,EAAE,SAAS,CAAC,GAAG,IAAI,CAAC,0GAA0G,EAAE,WAAW,CAAC,YAAY,CAAC,CAAC,8OAA8O,CAAC;AACzY,EAAE,MAAM,MAAM,GAAG,WAAW,CAAC,WAAW,CAAC;AACzC,EAAE,IAAI,MAAM,EAAE;AACd,IAAI,SAAS,CAAC,GAAG,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC;AAChC;AACA,EAAE,SAAS,CAAC,GAAG,IAAI,CAAC,iHAAiH,CAAC;AACtI,EAAE,KAAK,IAAI,OAAO,GAAG,CAAC,EAAE,QAAQ,GAAG,UAAU,CAAC,MAAM,EAAE,OAAO,GAAG,QAAQ,EAAE,OAAO,EAAE,EAAE;AACrF,IAAI,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC;AACpC,IAAI,SAAS,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,4DAA4D,EAAE,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,EAAE,QAAQ,KAAK,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,yCAAyC,EAAE,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,kBAAkB,EAAE,WAAW,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC;AAC3U;AACA,EAAE,SAAS,CAAC,GAAG,IAAI,CAAC,0HAA0H,CAAC;AAC/I,EAAE,KAAK,IAAI,SAAS,GAAG,CAAC,EAAE,QAAQ,GAAG,YAAY,CAAC,MAAM,EAAE,SAAS,GAAG,QAAQ,EAAE,SAAS,EAAE,EAAE;AAC7F,IAAI,IAAI,MAAM,GAAG,YAAY,CAAC,SAAS,CAAC;AACxC,IAAI,SAAS,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,8DAA8D,EAAE,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,EAAE,UAAU,KAAK,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,yCAAyC,EAAE,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,kBAAkB,EAAE,WAAW,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC;AAC/U;AACA,EAAE,SAAS,CAAC,GAAG,IAAI,CAAC,yBAAyB,CAAC;AAC9C,EAAE,IAAI,UAAU,EAAE;AAClB,IAAI,SAAS,CAAC,GAAG,IAAI,UAAU;AAC/B,IAAI,SAAS,CAAC,GAAG,IAAI,CAAC,sDAAsD,EAAE,UAAU,CAAC,CAAC,MAAM,EAAE,gBAAgB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,mCAAmC,EAAE,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,YAAY,CAAC;AACjS,GAAG,MAAM;AACT,IAAI,SAAS,CAAC,GAAG,IAAI,WAAW;AAChC;AACA,EAAE,SAAS,CAAC,GAAG,IAAI,CAAC,8CAA8C,EAAE,WAAW,CAAC,YAAY,CAAC,CAAC,gBAAgB,CAAC;AAC/G,EAAE,GAAG,EAAE;AACP;;;;"}