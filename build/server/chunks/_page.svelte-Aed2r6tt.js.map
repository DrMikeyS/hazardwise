{"version":3,"file":"_page.svelte-Aed2r6tt.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/workspace/hazard/cause/_page.svelte.js"],"sourcesContent":["import { d as store_get, l as copy_payload, m as assign_payload, u as unsubscribe_stores, a as pop, p as push, i as ensure_array_like } from \"../../../../../chunks/index.js\";\nimport \"../../../../../chunks/client2.js\";\nimport \"../../../../../chunks/client.js\";\nimport { y as escape_html } from \"../../../../../chunks/utils.js\";\nimport \"clsx\";\nimport \"js-cookie\";\nimport { m as mitigations } from \"../../../../../chunks/mitigations.js\";\nimport { L as LinkMitigationModal } from \"../../../../../chunks/LinkMitigationModal.js\";\nfunction _page($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let allMitigations, filteredMitigations;\n  let description = \"\";\n  let linkedMitigationIds = [];\n  let showMitigationModal = false;\n  let mitigationSearch = \"\";\n  allMitigations = store_get($$store_subs ??= {}, \"$mitigations\", mitigations);\n  filteredMitigations = allMitigations.filter((m) => m.description.toLowerCase().includes(mitigationSearch.toLowerCase()) && !linkedMitigationIds.includes(m.id));\n  let $$settled = true;\n  let $$inner_payload;\n  function $$render_inner($$payload2) {\n    $$payload2.out += `<main class=\"container py-4\"><button class=\"btn btn-link mb-3\">‚Üê Back to Hazard</button> <h1 class=\"mb-4\">${escape_html(\"Add Cause\")}</h1> <div class=\"mb-3\"><label for=\"causeDescription\" class=\"form-label\">Cause Description</label> <textarea id=\"causeDescription\" class=\"form-control\" rows=\"3\" placeholder=\"Describe a factor that could lead to this hazard\">`;\n    const $$body = escape_html(description);\n    if ($$body) {\n      $$payload2.out += `${$$body}`;\n    }\n    $$payload2.out += `</textarea> <div class=\"form-text\">A cause is a factor or condition that could contribute to the hazard occurring.</div></div> <div class=\"mb-4\"><label class=\"form-label\">Linked Mitigations</label> `;\n    if (linkedMitigationIds.length) {\n      $$payload2.out += \"<!--[-->\";\n      const each_array = ensure_array_like(linkedMitigationIds);\n      $$payload2.out += `<ul class=\"list-group mb-2\"><!--[-->`;\n      for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n        let mid = each_array[$$index];\n        if (store_get($$store_subs ??= {}, \"$mitigations\", mitigations).find((m) => m.id === mid)) {\n          $$payload2.out += \"<!--[-->\";\n          const mit = store_get($$store_subs ??= {}, \"$mitigations\", mitigations).find((m) => m.id === mid);\n          $$payload2.out += `<li class=\"list-group-item d-flex justify-content-between align-items-center\">${escape_html(mit.description)} <button class=\"btn btn-sm btn-outline-danger\">Remove</button></li>`;\n        } else {\n          $$payload2.out += \"<!--[!-->\";\n        }\n        $$payload2.out += `<!--]-->`;\n      }\n      $$payload2.out += `<!--]--></ul>`;\n    } else {\n      $$payload2.out += \"<!--[!-->\";\n      $$payload2.out += `<p class=\"text-muted\">No mitigations linked yet.</p>`;\n    }\n    $$payload2.out += `<!--]--></div> <div class=\"mb-3\"><button class=\"btn btn-secondary me-2\">+ Add New Mitigation</button> <button class=\"btn btn-outline-primary\">Link Existing Mitigation</button></div> <button class=\"btn btn-success\">${escape_html(\"Save Cause\")}</button> `;\n    LinkMitigationModal($$payload2, {\n      show: showMitigationModal,\n      mitigations: filteredMitigations,\n      get search() {\n        return mitigationSearch;\n      },\n      set search($$value) {\n        mitigationSearch = $$value;\n        $$settled = false;\n      }\n    });\n    $$payload2.out += `<!----></main>`;\n  }\n  do {\n    $$settled = true;\n    $$inner_payload = copy_payload($$payload);\n    $$render_inner($$inner_payload);\n  } while (!$$settled);\n  assign_payload($$payload, $$inner_payload);\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}