import{f as P,e as D,a as y,r as B}from"../chunks/Bgrwumxt.js";import"../chunks/DhE9Dmh7.js";import{p as C,o as E,t as Y,d as t,a as j,s as c,c as m,e as d,m as k,g as q,r as l,n as F}from"../chunks/BITUO3ds.js";import{s as _}from"../chunks/OzCop-J-.js";import{b as G}from"../chunks/D4bh5b3p.js";import{i as H}from"../chunks/DYcduxHM.js";import{p as v}from"../chunks/BuXC-ivL.js";import{p as J}from"../chunks/KPTtVCqv.js";import{m as z,c as K}from"../chunks/CBoHnL1w.js";import{g as p}from"../chunks/CQtkROrR.js";var L=P('<main class="container py-4"><button class="btn btn-link mb-3">‚Üê Back</button> <h1 class="mb-4"> </h1> <div class="mb-3"><label for="mitigationDescription" class="form-label">Mitigation Description</label> <textarea id="mitigationDescription" class="form-control" rows="3" placeholder="e.g. Add human review step"></textarea> <div class="form-text">A mitigation is an action or control that reduces the likelihood or impact of a hazard or cause.</div></div> <button class="btn btn-success"> </button></main>');function aa(w,M){C(M,!1);let r=null,o=null,i=k(null),n=k("");E(()=>{if(r=v.url.searchParams.get("hazardID"),o=v.url.searchParams.get("causeID"),d(i,v.url.searchParams.get("mitigationID")),!r&&!o&&(alert("You must specify either a hazard or cause."),p("/workspace")),t(i)){const e=q(z).find(a=>a.id===t(i));e&&d(n,e.description)}});function b(){o?p(`/workspace/hazard/cause?hazardID=${r}&causeID=${o}`):r?p(`/workspace/hazard?id=${r}`):p("/workspace")}function S(){z.update(e=>{if(t(i))return e.map(a=>a.id===t(i)?{...a,description:t(n)}:a);{const a=e.length+1,s=`M${String(a).padStart(2,"0")}`;return d(i,s),[...e,{id:s,description:t(n)}]}}),t(i)&&(o?K.update(e=>e.map(a=>{var s;return a.id===o&&!((s=a.mitigationIds)!=null&&s.includes(t(i)))?{...a,mitigationIds:[...a.mitigationIds||[],t(i)]}:a})):r&&J.update(e=>({...e,hazards:e.hazards.map(a=>{var s;return a.id===r&&!((s=a.mitigationIds)!=null&&s.includes(t(i)))?{...a,mitigationIds:[...a.mitigationIds||[],t(i)]}:a})}))),b()}H();var u=L(),I=m(u),f=c(I,2),$=m(f,!0);l(f);var g=c(f,2),x=c(m(g),2);B(x),F(2),l(g);var h=c(g,2),A=m(h,!0);l(h),l(u),Y(()=>{_($,t(i)?"Edit Mitigation":"Add Mitigation"),_(A,t(i)?"Save Changes":"Save Mitigation")}),D("click",I,b),G(x,()=>t(n),e=>d(n,e)),D("click",h,S),y(w,u),j()}export{aa as component};
