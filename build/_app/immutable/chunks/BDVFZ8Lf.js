import{g as c}from"./BITUO3ds.js";import{p as r}from"./KPTtVCqv.js";import{c as o,m as u}from"./CBoHnL1w.js";import{i as p}from"./B94qQf-I.js";class z{static generateNewId(s){const i=s.map(t=>parseInt(t.id,10)).filter(t=>!isNaN(t));return String((i.length?Math.max(...i):0)+1)}static saveNewHazard(s){const i=c(r),t=this.generateNewId(i.hazards||[]),a={id:t,description:s,causeIds:[],mitigationIds:[],impactIds:[]};return r.update(e=>({...e,hazards:[...e.hazards??[],a]})),{id:t,hazardObj:a}}static removeUnusedCauses(){const s=c(r),i=new Set(s.hazards.flatMap(t=>t.causeIds||[]));o.update(t=>t.filter(a=>i.has(a.id)))}static removeUnusedMitigations(){const s=c(r),i=new Set([...s.hazards.flatMap(t=>t.mitigationIds||[]),...s.hazards.flatMap(t=>t.causeIds||[]).flatMap(t=>{var a;return((a=c(o).find(e=>e.id===t))==null?void 0:a.mitigationIds)||[]})]);u.update(t=>t.filter(a=>i.has(a.id)))}static removeUnusedImpacts(){const s=c(r),i=new Set(s.hazards.flatMap(t=>t.impactIds||[]));p.update(t=>t.filter(a=>i.has(a.id)))}static removeImpact(s,i){return r.update(a=>({...a,hazards:a.hazards.map(e=>e.id===s?{...e,impactIds:(e.impactIds||[]).filter(d=>d!==i)}:e)})),c(r).hazards.find(a=>a.id===s)}static removeCause(s,i){return r.update(a=>({...a,hazards:a.hazards.map(e=>e.id===s?{...e,causeIds:(e.causeIds||[]).filter(d=>d!==i)}:e)})),this.removeUnusedCauses(),c(r).hazards.find(a=>a.id===s)}static removeHazardMitigation(s,i){return r.update(a=>({...a,hazards:a.hazards.map(e=>e.id===s?{...e,mitigationIds:(e.mitigationIds||[]).filter(d=>d!==i)}:e)})),c(r).hazards.find(a=>a.id===s)}static getHighestRisk(s){const i=c(p),t=(s.impactIds||[]).map(d=>i.find(n=>n.id===d)).filter(d=>!!d);if(!t.length)return{score:0,rating:"",color:""};const a=t.reduce((d,n)=>n.score>d.score?n:d),e={Acceptable:"#28a745",Undesirable:"#ffc107",Unacceptable:"#dc3545","Unacceptable Without Further Mitigation":"#dc3545"};return{score:a.score,rating:a.rating,color:e[a.rating]??"#6c757d"}}}export{z as H};
