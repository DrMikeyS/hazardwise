import{f as y,a as B}from"../chunks/EuKFVhsR.js";import"../chunks/CjrjPegm.js";import{o as C}from"../chunks/fqUTzOFw.js";import{p as E,t as Y,g as t,a as j,s as m,c,d,m as D,r as l,n as q}from"../chunks/DIjqGaOE.js";import{s as k}from"../chunks/DSOjtZ6D.js";import{e as _,r as F}from"../chunks/DDm2SC16.js";import{b as G}from"../chunks/fMvjHjjw.js";import{i as H}from"../chunks/B7ev73gN.js";import{g as J}from"../chunks/D-P7AXKl.js";import{p as v}from"../chunks/Ak39_y-t.js";import{p as K}from"../chunks/Bu9f80X6.js";import{c as L}from"../chunks/CVsMCqo-.js";import{m as w}from"../chunks/HCEeGut2.js";import{g as p}from"../chunks/Dkv_9hRV.js";import{b as u}from"../chunks/ahzJhC7E.js";var N=y('<main class="container py-4"><button class="btn btn-link mb-3">‚Üê Back</button> <h1 class="mb-4"> </h1> <div class="mb-3"><label for="mitigationDescription" class="form-label">Mitigation Description</label> <textarea id="mitigationDescription" class="form-control" rows="3" placeholder="e.g. Add human review step"></textarea> <div class="form-text">A mitigation is an action or control that reduces the likelihood or impact of a hazard or cause.</div></div> <button class="btn btn-success"> </button></main>');function oa(M,S){E(S,!1);let s=null,o=null,i=D(null),n=D("");C(()=>{if(s=v.url.searchParams.get("hazardID"),o=v.url.searchParams.get("causeID"),d(i,v.url.searchParams.get("mitigationID")),!s&&!o&&(alert("You must specify either a hazard or cause."),p(u+"/workspace/hazards")),t(i)){const e=J(w).find(a=>a.id===t(i));e&&d(n,e.description)}});function I(){o?p(u+`/workspace/hazard/cause?hazardID=${s}&causeID=${o}`):s?p(u+`/workspace/hazard?id=${s}`):p(u+"/workspace/hazards")}function $(){w.update(e=>{if(t(i))return e.map(a=>a.id===t(i)?{...a,description:t(n)}:a);{const a=e.length+1,r=`M${String(a).padStart(2,"0")}`;return d(i,r),[...e,{id:r,description:t(n)}]}}),t(i)&&(o?L.update(e=>e.map(a=>{var r;return a.id===o&&!((r=a.mitigationIds)!=null&&r.includes(t(i)))?{...a,mitigationIds:[...a.mitigationIds||[],t(i)]}:a})):s&&K.update(e=>({...e,hazards:e.hazards.map(a=>{var r;return a.id===s&&!((r=a.mitigationIds)!=null&&r.includes(t(i)))?{...a,mitigationIds:[...a.mitigationIds||[],t(i)]}:a})}))),I()}H();var f=N(),x=c(f),g=m(x,2),A=c(g,!0);l(g);var h=m(g,2),z=m(c(h),2);F(z),q(2),l(h);var b=m(h,2),P=c(b,!0);l(b),l(f),Y(()=>{k(A,t(i)?"Edit Mitigation":"Add Mitigation"),k(P,t(i)?"Save Changes":"Save Mitigation")}),_("click",x,I),G(z,()=>t(n),e=>d(n,e)),_("click",b,$),B(M,f),j()}export{oa as component};
