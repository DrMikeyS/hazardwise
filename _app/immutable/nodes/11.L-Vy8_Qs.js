import{f as d,a as o,c as Y,t as Kt}from"../chunks/DKjMb6sX.js";import"../chunks/BoZ7937s.js";import{h as ft,p as Ot,l as Pt,d as Qt,a as St,s as i,c as e,b as Vt,m as Wt,g as t,r,f as A,n as Xt,t as j,e as B}from"../chunks/T6ZX_lWH.js";import{s as u}from"../chunks/DLR2iFmf.js";import{i as b}from"../chunks/CZsKGD6Q.js";import{e as F,i as G}from"../chunks/BT3w6O0N.js";import{e as J}from"../chunks/CXugo_-b.js";import{a as Zt}from"../chunks/i5w7oQmI.js";import{i as ta}from"../chunks/DIFYUOde.js";import{a as K,s as aa}from"../chunks/2BhNkyyE.js";import{p as ut}from"../chunks/DF6sdC5p.js";import{c as ra}from"../chunks/W5Kga-bb.js";import{i as sa}from"../chunks/BqKrn31S.js";import{m as ea}from"../chunks/T6nlyP46.js";import{g as gt}from"../chunks/Btyk992k.js";import{b as ht}from"../chunks/Cm3tyc6z.js";import{H as st}from"../chunks/BjGuIqdB.js";import{a as oa}from"../chunks/YXMk_YDc.js";function ia(k,C,L,O){var q=k.__style;if(ft||q!==C){var N=Zt(C);(!ft||N!==k.getAttribute("style"))&&(N==null?k.removeAttribute("style"):k.style.cssText=N),k.__style=C}return O}var da=d('<div class="alert alert-info" role="alert">You have not added any hazards yet. Get started by adding your first one.</div> <button class="btn btn-primary mt-3">Add First Hazard</button>',1),na=d('<span class="badge ms-2"> </span>'),va=d("<span> </span> ",1),la=d('<span class="text-muted">None</span>'),ca=d("<tr><td> </td><td><!></td></tr>"),ma=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th style="width:50%">Cause</th><th style="width:50%">Mitigations</th></tr></thead><tbody></tbody></table></div>'),pa=d('<p class="text-muted mb-3">No causes added.</p>'),_a=d("<tr><td> </td></tr>"),ba=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th>Mitigation</th></tr></thead><tbody></tbody></table></div>'),fa=d('<p class="text-muted">No mitigations added.</p>'),ua=d("<em>Not assessed</em>"),ga=d("<tr><td> </td><td><!></td></tr>"),ha=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th style="width:70%">Description</th><th style="width:30%">Risk Rating</th></tr></thead><tbody></tbody></table></div>'),ya=d('<p class="text-muted mb-3">No impacts added.</p>'),xa=d('<details class="card mb-3"><summary class="card-header d-flex justify-content-between align-items-center"><div><strong> </strong> <!></div> <div class="d-flex align-items-center"><div class="btn-group"><button type="button" class="btn btn-sm btn-outline-secondary">Edit</button> <button type="button" class="btn btn-sm btn-outline-danger">Remove</button></div> <small class="ms-3 text-muted">â–¼</small></div></summary> <div class="card-body"><h5 class="card-title">Causes</h5> <!> <h5 class="card-title">Hazard-Level Mitigations</h5> <!> <h5 class="card-title">Impacts</h5> <!></div></details>'),za=d('<button class="btn btn-primary mb-3">Add Another Hazard</button> <!>',1),ka=d('<main class="container py-4"><h1 class="mb-3">Hazard Log</h1> <!></main>');function Ya(k,C){Ot(C,!1);const[L,O]=aa(),q=()=>K(ut,"$project",L),N=()=>K(sa,"$impacts",L),et=()=>K(ra,"$causes",L),T=()=>K(ea,"$mitigations",L),P=Wt();function ot(m){return(m.hazardImpacts||[]).map(n=>{const g=N().find(V=>V.id===n.impactID),S=oa(n);return{hi:n,core:g,risk:S}}).filter(n=>!!n.core)}console.log("project:",q()),console.log("impacts:",N());function it(){gt(ht+"/workspace/hazard")}function yt(m){confirm("Are you sure you want to remove this hazard?")&&ut.update(n=>({...n,hazards:n.hazards.filter(g=>g.id!==m)}))}Pt(()=>q(),()=>{Vt(P,q().hazards||[])}),Qt(),ta();var Q=ka(),xt=i(e(Q),2);{var zt=m=>{var n=da(),g=i(A(n),2);J("click",g,it),o(m,n)},kt=m=>{var n=za(),g=A(n),S=i(g,2);F(S,1,()=>t(P),G,(V,v)=>{var W=xa(),X=e(W),Z=e(X),tt=e(Z),Ht=e(tt,!0);r(tt);var dt=i(tt),It=i(dt);{var wt=s=>{var a=na(),p=e(a);r(a),j((_,H)=>{ia(a,`background-color: ${_??""};`),u(p,`Risk: ${H??""}`)},[()=>st.getHighestRisk(t(v)).color,()=>st.getHighestRisk(t(v)).rating],B),o(s,a)};b(It,s=>{st.getHighestRisk(t(v)).rating&&s(wt)})}r(Z);var nt=i(Z,2),vt=e(nt),lt=e(vt),Rt=i(lt,2);r(vt),Xt(2),r(nt),r(X);var ct=i(X,2),mt=i(e(ct),2);{var At=s=>{var a=ma(),p=e(a),_=i(e(p));F(_,5,()=>t(v).causeIds,G,(H,h)=>{var I=Y(),D=A(I);{var w=c=>{var l=ca();const f=B(()=>et().find(z=>z.id===t(h)));var y=e(l),E=e(y,!0);r(y);var M=i(y),x=e(M);{var $=z=>{var R=Y(),qt=A(R);F(qt,1,()=>t(f).mitigationIds,G,(Et,_t,Ft)=>{var bt=Y(),Gt=A(bt);{var Tt=at=>{var U=va();const Ut=B(()=>T().find(Jt=>Jt.id===t(_t)));var rt=A(U),Yt=e(rt,!0);r(rt);var Bt=i(rt,1,!0);j(()=>{u(Yt,t(Ut).description),u(Bt,Ft<t(f).mitigationIds.length-1?", ":"")}),o(at,U)};b(Gt,at=>{T().find(U=>U.id===t(_t))&&at(Tt)})}o(Et,bt)}),o(z,R)},Lt=z=>{var R=la();o(z,R)};b(x,z=>{var R;(R=t(f).mitigationIds)!=null&&R.length?z($):z(Lt,!1)})}r(M),r(l),j(()=>u(E,t(f).description)),o(c,l)};b(D,c=>{et().find(l=>l.id===t(h))&&c(w)})}o(H,I)}),r(_),r(p),r(a),o(s,a)},jt=s=>{var a=pa();o(s,a)};b(mt,s=>{var a;(a=t(v).causeIds)!=null&&a.length?s(At):s(jt,!1)})}var pt=i(mt,4);{var Nt=s=>{var a=ba(),p=e(a),_=i(e(p));F(_,5,()=>t(v).mitigationIds,G,(H,h)=>{var I=Y(),D=A(I);{var w=c=>{var l=_a();const f=B(()=>T().find(M=>M.id===t(h)));var y=e(l),E=e(y,!0);r(y),r(l),j(()=>u(E,t(f).description)),o(c,l)};b(D,c=>{T().find(l=>l.id===t(h))&&c(w)})}o(H,I)}),r(_),r(p),r(a),o(s,a)},Dt=s=>{var a=fa();o(s,a)};b(pt,s=>{var a;(a=t(v).mitigationIds)!=null&&a.length?s(Nt):s(Dt,!1)})}var Mt=i(pt,4);{var $t=s=>{var a=ha(),p=e(a),_=i(e(p));F(_,5,()=>ot(t(v)),G,(H,h)=>{let I=()=>t(h).core,D=()=>t(h).risk;var w=ga(),c=e(w),l=e(c,!0);r(c);var f=i(c),y=e(f);{var E=x=>{var $=Kt();j(()=>u($,D().rating)),o(x,$)},M=x=>{var $=ua();o(x,$)};b(y,x=>{D()?x(E):x(M,!1)})}r(f),r(w),j(()=>u(l,I().description)),o(H,w)}),r(_),r(p),r(a),o(s,a)},Ct=s=>{var a=ya();o(s,a)};b(Mt,s=>{ot(t(v)).length?s($t):s(Ct,!1)})}r(ct),r(W),j(()=>{u(Ht,t(v).id),u(dt,`: ${t(v).description??""} `)}),J("click",lt,()=>gt(ht+`/workspace/hazard?id=${t(v).id}`)),J("click",Rt,()=>yt(t(v).id)),o(V,W)}),J("click",g,it),o(m,n)};b(xt,m=>{t(P).length===0?m(zt):m(kt,!1)})}r(Q),o(k,Q),St(),O()}export{Ya as component};
