import{f as n,a as o,c as mt}from"../chunks/ChAviyHt.js";import{i as Bt}from"../chunks/qNE941fV.js";import{p as Nt,l as At,h as St,t as g,a as Dt,d as Lt,m as Pt,$ as Ut,c as e,r as t,s as d,g as a,j as at,f as U}from"../chunks/CXmlZRuw.js";import{h as Et,s as m}from"../chunks/BUZbKzbf.js";import{i as z}from"../chunks/AaKCM-in.js";import{e as C,i as j}from"../chunks/DqM6bYLX.js";import{a as pt}from"../chunks/BcXK0Cv5.js";import{s as gt}from"../chunks/daXtgChX.js";import{s as rt}from"../chunks/DxgXjCp7.js";import{s as Ft,a as E}from"../chunks/BORQ0yCD.js";import{p as Gt}from"../chunks/nz0IzRFZ.js";import{c as Jt}from"../chunks/BLf9jbdx.js";import{i as Kt}from"../chunks/DFSBX4kA.js";import{g as Ot,m as Qt}from"../chunks/C9Et0Kmr.js";import{H as et}from"../chunks/BW6px5DQ.js";import{a as Tt}from"../chunks/D-dackkR.js";var Vt=n('<span class="badge svelte-10mthhq"> </span>'),Wt=n("<em>None</em>"),Xt=n("<tr><td> </td><td><a> </a></td><td><!></td></tr>"),Yt=n('<span class="badge svelte-10mthhq"> </span>'),Zt=n("<li> </li>"),ta=n("<ul></ul>"),aa=n('<p class="text-muted">None</p>'),ra=n("<li> </li>"),ea=n('<h6 class="mb-1 mt-3"> </h6> <ul></ul>',1),sa=n('<p class="text-muted">None</p>'),ia=n('Risk Level: <span class="badge me-1 svelte-10mthhq"> </span>',1),oa=n("<em>Not assessed</em>"),na=n('<li class="mb-2"><strong> </strong><br/> Severity: <span> </span> Likelihood: <span> </span> <!></li>'),la=n('<ul class="list-unstyled"></ul>'),da=n('<p class="text-muted">No impacts added.</p>'),va=n('<div class="card mb-4"><div class="card-header d-flex justify-content-between align-items-center"><div><h4><strong> </strong> </h4></div> <div><!></div></div> <div class="card-body"><h5>Potential Causes of Hazard</h5> <!> <h5>All Related Mitigations</h5> <!> <h5>Impacts & Risk Ratings</h5> <!></div></div>'),ca=n('<main class="container py-4"><h1 class="mb-4"> </h1> <div class="table-responsive mb-5"><table class="table table-bordered"><thead class="thead-light"><tr><th>ID</th><th>Description</th><th>Highest Risk</th></tr></thead><tbody></tbody></table></div> <!></main>');function Ha(_t,ft){Nt(ft,!1);const[N,ut]=Ft(),A=()=>E(Gt,"$project",N),st=()=>E(Jt,"$causes",N),it=()=>E(Qt,"$mitigations",N),ht=()=>E(Kt,"$impacts",N),F=Pt(),bt={Catastrophic:"bg-danger",Major:"bg-warning text-dark",Considerable:"bg-info text-dark",Significant:"bg-secondary text-white",Minor:"bg-light text-dark"},xt={"Almost Certain":"bg-danger",Likely:"bg-warning text-dark",Possible:"bg-info text-dark",Unlikely:"bg-secondary text-white",Rare:"bg-light text-dark"};function ot(v){return(v.causeIds||[]).map(r=>st().find(c=>c.id===r)).filter(Boolean)}function kt(v){return(v.mitigationIds||[]).map(r=>it().find(c=>c.id===r)).filter(Boolean)}function nt(v){return(v.hazardImpacts||[]).map(r=>{const c=ht().find(l=>l.id===r.impactID),p=Tt(r);return{hi:r,core:c,risk:p}}).filter(r=>!!r.core)}function lt(v){const r=kt(v),c=(v.causeIds||[]).flatMap(l=>{var _;return((_=st().find(u=>u.id===l))==null?void 0:_.mitigationIds)||[]}).map(l=>it().find(_=>_.id===l)).filter(Boolean),p=new Map;return[...r,...c].forEach(l=>p.set(l.id,l)),Array.from(p.values())}function yt(v){return Ot(lt(v))}At(()=>A(),()=>{Lt(F,A().hazards||[])}),St(),Bt();var G=ca();Et(v=>{g(()=>Ut.title=`Hazard Summary Report for ${A().title??""}`)});var J=e(G),Mt=e(J);t(J);var K=d(J,2),dt=e(K),vt=d(e(dt));C(vt,5,()=>a(F),j,(v,r)=>{var c=Xt();const p=at(()=>et.getHighestRisk(a(r)));var l=e(c),_=e(l,!0);t(l);var u=d(l),y=e(u),O=e(y,!0);t(y),t(u);var S=d(u),D=e(S);{var Q=h=>{var b=Vt(),V=e(b,!0);t(b),g(()=>{rt(b,`background-color: ${a(p).color??""};`),m(V,a(p).rating)}),o(h,b)},T=h=>{var b=Wt();o(h,b)};z(D,h=>{a(p).rating?h(Q):h(T,!1)})}t(S),t(c),g(()=>{m(_,a(r).id),pt(y,"href",`#${a(r).id??""}`),m(O,a(r).description)}),o(v,c)}),t(vt),t(dt),t(K);var Rt=d(K,2);C(Rt,1,()=>a(F),j,(v,r)=>{var c=va();const p=at(()=>et.getHighestRisk(a(r)));var l=e(c),_=e(l),u=e(_),y=e(u),O=e(y,!0);t(y);var S=d(y);t(u),t(_);var D=d(_,2),Q=e(D);{var T=s=>{var i=Yt(),M=e(i);t(i),g(()=>{rt(i,`background-color: ${a(p).color??""};`),m(M,`Risk: ${a(p).rating??""}`)}),o(s,i)};z(Q,s=>{a(p).rating&&s(T)})}t(D),t(l);var h=d(l,2),b=d(e(h),2);{var V=s=>{var i=ta();C(i,5,()=>ot(a(r)),j,(M,R)=>{var f=Zt(),x=e(f,!0);t(f),g(()=>m(x,a(R).description)),o(M,f)}),t(i),o(s,i)},$t=s=>{var i=aa();o(s,i)};z(b,s=>{ot(a(r)).length?s(V):s($t,!1)})}var ct=d(b,4);{var It=s=>{var i=mt(),M=U(i);C(M,1,()=>yt(a(r)),j,(R,f)=>{var x=mt(),q=U(x);{var w=$=>{var L=ea(),k=U(L),W=e(k,!0);t(k);var I=d(k,2);C(I,5,()=>a(f).items,j,(X,Y)=>{var B=ra(),Z=e(B,!0);t(B),g(()=>m(Z,a(Y).description)),o(X,B)}),t(I),g(()=>m(W,a(f).label)),o($,L)};z(q,$=>{a(f).items.length&&$(w)})}o(R,x)}),o(s,i)},zt=s=>{var i=sa();o(s,i)};z(ct,s=>{lt(a(r)).length?s(It):s(zt,!1)})}var Ht=d(ct,4);{var Ct=s=>{var i=la();C(i,5,()=>nt(a(r)),j,(M,R)=>{let f=()=>a(R).hi,x=()=>a(R).core,q=()=>a(R).risk;var w=na(),$=e(w),L=e($,!0);t($);var k=d($,3),W=e(k,!0);t(k);var I=d(k,2),X=e(I,!0);t(I);var Y=d(I,2);{var B=H=>{var P=ia(),tt=d(U(P)),qt=e(tt,!0);t(tt),g(wt=>{rt(tt,`background-color: ${wt??""};`),m(qt,q().rating)},[()=>et.getRiskColor(q().rating)],at),o(H,P)},Z=H=>{var P=oa();o(H,P)};z(Y,H=>{q().rating?H(B):H(Z,!1)})}t(w),g(()=>{m(L,x().description),gt(k,1,`badge ${bt[x().severity]} me-1`,"svelte-10mthhq"),m(W,x().severity),gt(I,1,`badge ${xt[f().likelihood]} me-1`,"svelte-10mthhq"),m(X,f().likelihood)}),o(M,w)}),t(i),o(s,i)},jt=s=>{var i=da();o(s,i)};z(Ht,s=>{nt(a(r)).length?s(Ct):s(jt,!1)})}t(h),t(c),g(()=>{pt(u,"id",a(r).id),m(O,a(r).id),m(S,`: ${a(r).description??""}`)}),o(v,c)}),t(G),g(()=>m(Mt,`Hazard Summary Report for ${A().title??""}`)),o(_t,G),Dt(),ut()}export{Ha as component};
