import{f as n,a as o}from"../chunks/EuKFVhsR.js";import"../chunks/CjrjPegm.js";import{p as wt,l as Ct,h as jt,t as f,a as Bt,s as v,c as e,d as Nt,m as At,au as St,r as t,g as r,i as T,f as Dt}from"../chunks/DIjqGaOE.js";import{s as m}from"../chunks/DSOjtZ6D.js";import{i as $}from"../chunks/CQyKFiTL.js";import{e as z,i as H}from"../chunks/DmmqpXdj.js";import{h as Lt}from"../chunks/B1h1sT1z.js";import{s as it}from"../chunks/B8I-ELwR.js";import{s as ot}from"../chunks/DDsT7xP8.js";import{s as V}from"../chunks/pXZMW71u.js";import{i as Pt}from"../chunks/B7ev73gN.js";import{s as Ut,a as A}from"../chunks/CxKmxjN7.js";import{p as Et}from"../chunks/Bu9f80X6.js";import{c as Ft}from"../chunks/CVsMCqo-.js";import{i as Gt}from"../chunks/Bj2ds-qs.js";import{m as Jt}from"../chunks/HCEeGut2.js";import{H as W}from"../chunks/B061VnbM.js";import{a as Kt}from"../chunks/CrXWVPai.js";var Ot=n('<span class="badge svelte-10mthhq"> </span>'),Qt=n("<em>None</em>"),Tt=n("<tr><td> </td><td><a> </a></td><td><!></td></tr>"),Vt=n('<span class="badge svelte-10mthhq"> </span>'),Wt=n("<li> </li>"),Xt=n("<ul></ul>"),Yt=n('<p class="text-muted">None</p>'),Zt=n("<li> </li>"),ta=n("<ul></ul>"),aa=n('<p class="text-muted">None</p>'),ra=n('Risk Level: <span class="badge me-1 svelte-10mthhq"> </span>',1),ea=n("<em>Not assessed</em>"),sa=n('<li class="mb-2"><strong> </strong><br/> Severity: <span> </span> Likelihood: <span> </span> <!></li>'),ia=n('<ul class="list-unstyled"></ul>'),oa=n('<p class="text-muted">No impacts added.</p>'),na=n('<div class="card mb-4"><div class="card-header d-flex justify-content-between align-items-center"><div><h4><strong> </strong> </h4></div> <div><!></div></div> <div class="card-body"><h5>Potential Causes of Hazard</h5> <!> <h5>All Related Mitigations</h5> <!> <h5>Impacts & Risk Ratings</h5> <!></div></div>'),la=n('<main class="container py-4"><h1 class="mb-4"> </h1> <div class="table-responsive mb-5"><table class="table table-bordered"><thead class="thead-light"><tr><th>ID</th><th>Description</th><th>Highest Risk</th></tr></thead><tbody></tbody></table></div> <!></main>');function Ha(nt,lt){wt(lt,!1);const[I,dt]=Ut(),q=()=>A(Et,"$project",I),X=()=>A(Ft,"$causes",I),Y=()=>A(Jt,"$mitigations",I),vt=()=>A(Gt,"$impacts",I),S=At(),ct={Catastrophic:"bg-danger",Major:"bg-warning text-dark",Considerable:"bg-info text-dark",Significant:"bg-secondary text-white",Minor:"bg-light text-dark"},mt={"Almost Certain":"bg-danger",Likely:"bg-warning text-dark",Possible:"bg-info text-dark",Unlikely:"bg-secondary text-white",Rare:"bg-light text-dark"};function Z(c){return(c.causeIds||[]).map(a=>X().find(d=>d.id===a)).filter(Boolean)}function pt(c){return(c.mitigationIds||[]).map(a=>Y().find(d=>d.id===a)).filter(Boolean)}function tt(c){return(c.hazardImpacts||[]).map(a=>{const d=vt().find(l=>l.id===a.impactID),p=Kt(a);return{hi:a,core:d,risk:p}}).filter(a=>!!a.core)}function at(c){const a=pt(c),d=(c.causeIds||[]).flatMap(l=>{var _;return((_=X().find(u=>u.id===l))==null?void 0:_.mitigationIds)||[]}).map(l=>Y().find(_=>_.id===l)).filter(Boolean),p=new Map;return[...a,...d].forEach(l=>p.set(l.id,l)),Array.from(p.values())}Ct(()=>q(),()=>{Nt(S,q().hazards||[])}),jt(),Pt();var D=la();Lt(c=>{f(()=>St.title=`Hazard Summary Report for ${q().title??""}`)});var L=e(D),_t=e(L);t(L);var P=v(L,2),rt=e(P),et=v(e(rt));z(et,5,()=>r(S),H,(c,a)=>{var d=Tt();const p=T(()=>W.getHighestRisk(r(a)));var l=e(d),_=e(l,!0);t(l);var u=v(l),x=e(u),U=e(x,!0);t(x),t(u);var w=v(u),C=e(w);{var E=h=>{var b=Ot(),G=e(b,!0);t(b),f(()=>{V(b,`background-color: ${r(p).color??""};`),m(G,r(p).rating)}),o(h,b)},F=h=>{var b=Qt();o(h,b)};$(C,h=>{r(p).rating?h(E):h(F,!1)})}t(w),t(d),f(()=>{m(_,r(a).id),it(x,"href",`#${r(a).id??""}`),m(U,r(a).description)}),o(c,d)}),t(et),t(rt),t(P);var gt=v(P,2);z(gt,1,()=>r(S),H,(c,a)=>{var d=na();const p=T(()=>W.getHighestRisk(r(a)));var l=e(d),_=e(l),u=e(_),x=e(u),U=e(x,!0);t(x);var w=v(x);t(u),t(_);var C=v(_,2),E=e(C);{var F=s=>{var i=Vt(),k=e(i);t(i),f(()=>{V(i,`background-color: ${r(p).color??""};`),m(k,`Risk: ${r(p).rating??""}`)}),o(s,i)};$(E,s=>{r(p).rating&&s(F)})}t(C),t(l);var h=v(l,2),b=v(e(h),2);{var G=s=>{var i=Xt();z(i,5,()=>Z(r(a)),H,(k,y)=>{var g=Wt(),R=e(g,!0);t(g),f(()=>m(R,r(y).description)),o(k,g)}),t(i),o(s,i)},ft=s=>{var i=Yt();o(s,i)};$(b,s=>{Z(r(a)).length?s(G):s(ft,!1)})}var st=v(b,4);{var ut=s=>{var i=ta();z(i,5,()=>at(r(a)),H,(k,y)=>{var g=Zt(),R=e(g,!0);t(g),f(()=>m(R,r(y).description)),o(k,g)}),t(i),o(s,i)},ht=s=>{var i=aa();o(s,i)};$(st,s=>{at(r(a)).length?s(ut):s(ht,!1)})}var bt=v(st,4);{var xt=s=>{var i=ia();z(i,5,()=>tt(r(a)),H,(k,y)=>{let g=()=>r(y).hi,R=()=>r(y).core,J=()=>r(y).risk;var K=sa(),O=e(K),yt=e(O,!0);t(O);var j=v(O,3),Rt=e(j,!0);t(j);var B=v(j,2),Mt=e(B,!0);t(B);var $t=v(B,2);{var zt=M=>{var N=ra(),Q=v(Dt(N)),It=e(Q,!0);t(Q),f(qt=>{V(Q,`background-color: ${qt??""};`),m(It,J().rating)},[()=>W.getRiskColor(J().rating)],T),o(M,N)},Ht=M=>{var N=ea();o(M,N)};$($t,M=>{J().rating?M(zt):M(Ht,!1)})}t(K),f(()=>{m(yt,R().description),ot(j,1,`badge ${ct[R().severity]} me-1`,"svelte-10mthhq"),m(Rt,R().severity),ot(B,1,`badge ${mt[g().likelihood]} me-1`,"svelte-10mthhq"),m(Mt,g().likelihood)}),o(k,K)}),t(i),o(s,i)},kt=s=>{var i=oa();o(s,i)};$(bt,s=>{tt(r(a)).length?s(xt):s(kt,!1)})}t(h),t(d),f(()=>{it(u,"id",r(a).id),m(U,r(a).id),m(w,`: ${r(a).description??""}`)}),o(c,d)}),t(D),f(()=>m(_t,`Hazard Summary Report for ${q().title??""}`)),o(nt,D),Bt(),dt()}export{Ha as component};
