import{f as n,a as o}from"../chunks/DA4zlYT6.js";import{i as qa}from"../chunks/Bv-0c6t3.js";import{p as wa,l as Ca,h as Ba,t as f,a as Na,d as Aa,m as Sa,$ as Da,c as e,r as a,s as v,g as r,j as T,f as La}from"../chunks/Dh6mP1wG.js";import{h as Pa,s as m}from"../chunks/DvvhDkJs.js";import{i as M}from"../chunks/BEFexrlf.js";import{e as z,i as H}from"../chunks/BhqyOs_e.js";import{a as ia}from"../chunks/ClQRzYlK.js";import{s as oa}from"../chunks/DDey6hSd.js";import{s as V}from"../chunks/eZDR9eBo.js";import{s as Ua,a as A}from"../chunks/BqAN62AK.js";import{p as Ea}from"../chunks/CD6oGcH5.js";import{c as Fa}from"../chunks/SP2ZwDGS.js";import{i as Ga}from"../chunks/Dsge_ew0.js";import{m as Ja}from"../chunks/5zig9VdD.js";import{H as W}from"../chunks/BbZI0MPZ.js";import{a as Ka}from"../chunks/DyxDYEzf.js";var Oa=n('<span class="badge svelte-10mthhq"> </span>'),Qa=n("<em>None</em>"),Ta=n("<tr><td> </td><td><a> </a></td><td><!></td></tr>"),Va=n('<span class="badge svelte-10mthhq"> </span>'),Wa=n("<li> </li>"),Xa=n("<ul></ul>"),Ya=n('<p class="text-muted">None</p>'),Za=n("<li> </li>"),at=n("<ul></ul>"),tt=n('<p class="text-muted">None</p>'),rt=n('Risk Level: <span class="badge me-1 svelte-10mthhq"> </span>',1),et=n("<em>Not assessed</em>"),st=n('<li class="mb-2"><strong> </strong><br/> Severity: <span> </span> Likelihood: <span> </span> <!></li>'),it=n('<ul class="list-unstyled"></ul>'),ot=n('<p class="text-muted">No impacts added.</p>'),nt=n('<div class="card mb-4"><div class="card-header d-flex justify-content-between align-items-center"><div><h4><strong> </strong> </h4></div> <div><!></div></div> <div class="card-body"><h5>Potential Causes of Hazard</h5> <!> <h5>All Related Mitigations</h5> <!> <h5>Impacts & Risk Ratings</h5> <!></div></div>'),lt=n('<main class="container py-4"><h1 class="mb-4"> </h1> <div class="table-responsive mb-5"><table class="table table-bordered"><thead class="thead-light"><tr><th>ID</th><th>Description</th><th>Highest Risk</th></tr></thead><tbody></tbody></table></div> <!></main>');function Mt(na,la){wa(la,!1);const[I,da]=Ua(),j=()=>A(Ea,"$project",I),X=()=>A(Fa,"$causes",I),Y=()=>A(Ja,"$mitigations",I),va=()=>A(Ga,"$impacts",I),S=Sa(),ca={Catastrophic:"bg-danger",Major:"bg-warning text-dark",Considerable:"bg-info text-dark",Significant:"bg-secondary text-white",Minor:"bg-light text-dark"},ma={"Almost Certain":"bg-danger",Likely:"bg-warning text-dark",Possible:"bg-info text-dark",Unlikely:"bg-secondary text-white",Rare:"bg-light text-dark"};function Z(c){return(c.causeIds||[]).map(t=>X().find(d=>d.id===t)).filter(Boolean)}function pa(c){return(c.mitigationIds||[]).map(t=>Y().find(d=>d.id===t)).filter(Boolean)}function aa(c){return(c.hazardImpacts||[]).map(t=>{const d=va().find(l=>l.id===t.impactID),p=Ka(t);return{hi:t,core:d,risk:p}}).filter(t=>!!t.core)}function ta(c){const t=pa(c),d=(c.causeIds||[]).flatMap(l=>{var _;return((_=X().find(u=>u.id===l))==null?void 0:_.mitigationIds)||[]}).map(l=>Y().find(_=>_.id===l)).filter(Boolean),p=new Map;return[...t,...d].forEach(l=>p.set(l.id,l)),Array.from(p.values())}Ca(()=>j(),()=>{Aa(S,j().hazards||[])}),Ba(),qa();var D=lt();Pa(c=>{f(()=>Da.title=`Hazard Summary Report for ${j().title??""}`)});var L=e(D),_a=e(L);a(L);var P=v(L,2),ra=e(P),ea=v(e(ra));z(ea,5,()=>r(S),H,(c,t)=>{var d=Ta();const p=T(()=>W.getHighestRisk(r(t)));var l=e(d),_=e(l,!0);a(l);var u=v(l),x=e(u),U=e(x,!0);a(x),a(u);var q=v(u),w=e(q);{var E=h=>{var b=Oa(),G=e(b,!0);a(b),f(()=>{V(b,`background-color: ${r(p).color??""};`),m(G,r(p).rating)}),o(h,b)},F=h=>{var b=Qa();o(h,b)};M(w,h=>{r(p).rating?h(E):h(F,!1)})}a(q),a(d),f(()=>{m(_,r(t).id),ia(x,"href",`#${r(t).id??""}`),m(U,r(t).description)}),o(c,d)}),a(ea),a(ra),a(P);var ga=v(P,2);z(ga,1,()=>r(S),H,(c,t)=>{var d=nt();const p=T(()=>W.getHighestRisk(r(t)));var l=e(d),_=e(l),u=e(_),x=e(u),U=e(x,!0);a(x);var q=v(x);a(u),a(_);var w=v(_,2),E=e(w);{var F=s=>{var i=Va(),k=e(i);a(i),f(()=>{V(i,`background-color: ${r(p).color??""};`),m(k,`Risk: ${r(p).rating??""}`)}),o(s,i)};M(E,s=>{r(p).rating&&s(F)})}a(w),a(l);var h=v(l,2),b=v(e(h),2);{var G=s=>{var i=Xa();z(i,5,()=>Z(r(t)),H,(k,y)=>{var g=Wa(),R=e(g,!0);a(g),f(()=>m(R,r(y).description)),o(k,g)}),a(i),o(s,i)},fa=s=>{var i=Ya();o(s,i)};M(b,s=>{Z(r(t)).length?s(G):s(fa,!1)})}var sa=v(b,4);{var ua=s=>{var i=at();z(i,5,()=>ta(r(t)),H,(k,y)=>{var g=Za(),R=e(g,!0);a(g),f(()=>m(R,r(y).description)),o(k,g)}),a(i),o(s,i)},ha=s=>{var i=tt();o(s,i)};M(sa,s=>{ta(r(t)).length?s(ua):s(ha,!1)})}var ba=v(sa,4);{var xa=s=>{var i=it();z(i,5,()=>aa(r(t)),H,(k,y)=>{let g=()=>r(y).hi,R=()=>r(y).core,J=()=>r(y).risk;var K=st(),O=e(K),ya=e(O,!0);a(O);var C=v(O,3),Ra=e(C,!0);a(C);var B=v(C,2),$a=e(B,!0);a(B);var Ma=v(B,2);{var za=$=>{var N=rt(),Q=v(La(N)),Ia=e(Q,!0);a(Q),f(ja=>{V(Q,`background-color: ${ja??""};`),m(Ia,J().rating)},[()=>W.getRiskColor(J().rating)],T),o($,N)},Ha=$=>{var N=et();o($,N)};M(Ma,$=>{J().rating?$(za):$(Ha,!1)})}a(K),f(()=>{m(ya,R().description),oa(C,1,`badge ${ca[R().severity]} me-1`,"svelte-10mthhq"),m(Ra,R().severity),oa(B,1,`badge ${ma[g().likelihood]} me-1`,"svelte-10mthhq"),m($a,g().likelihood)}),o(k,K)}),a(i),o(s,i)},ka=s=>{var i=ot();o(s,i)};M(ba,s=>{aa(r(t)).length?s(xa):s(ka,!1)})}a(h),a(d),f(()=>{ia(u,"id",r(t).id),m(U,r(t).id),m(q,`: ${r(t).description??""}`)}),o(c,d)}),a(D),f(()=>m(_a,`Hazard Summary Report for ${j().title??""}`)),o(na,D),Na(),da()}export{Mt as component};
