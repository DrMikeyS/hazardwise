import{f as d,a as o,e as F,c as G,t as Kt}from"../chunks/DA4zlYT6.js";import{i as Ot}from"../chunks/Bv-0c6t3.js";import{p as Pt,l as Qt,h as St,a as Tt,d as Vt,m as Wt,s as i,c as e,g as t,r,f as R,n as Xt,t as j,j as U}from"../chunks/Dh6mP1wG.js";import{s as u}from"../chunks/DvvhDkJs.js";import{i as b}from"../chunks/BEFexrlf.js";import{e as $,i as C}from"../chunks/BhqyOs_e.js";import{s as Zt}from"../chunks/eZDR9eBo.js";import{a as Y,s as ta}from"../chunks/BqAN62AK.js";import{p as pt}from"../chunks/CD6oGcH5.js";import{c as aa}from"../chunks/SP2ZwDGS.js";import{i as ra}from"../chunks/Dsge_ew0.js";import{m as sa}from"../chunks/5zig9VdD.js";import{g as _t}from"../chunks/BsPCPuPp.js";import{b as bt}from"../chunks/C9Pz-73a.js";import{H as Z}from"../chunks/BbZI0MPZ.js";import{a as ea}from"../chunks/DyxDYEzf.js";var oa=d('<div class="alert alert-info" role="alert">You have not added any hazards yet. Get started by adding your first one.</div> <button class="btn btn-primary mt-3">Add First Hazard</button>',1),ia=d('<span class="badge ms-2"> </span>'),da=d("<span> </span> ",1),na=d('<span class="text-muted">None</span>'),va=d("<tr><td> </td><td><!></td></tr>"),la=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th style="width:50%">Cause</th><th style="width:50%">Mitigations</th></tr></thead><tbody></tbody></table></div>'),ca=d('<p class="text-muted mb-3">No causes added.</p>'),ma=d("<tr><td> </td></tr>"),pa=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th>Mitigation</th></tr></thead><tbody></tbody></table></div>'),_a=d('<p class="text-muted">No mitigations added.</p>'),ba=d("<em>Not assessed</em>"),fa=d("<tr><td> </td><td><!></td></tr>"),ua=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th style="width:70%">Description</th><th style="width:30%">Risk Rating</th></tr></thead><tbody></tbody></table></div>'),ga=d('<p class="text-muted mb-3">No impacts added.</p>'),ha=d('<details class="card mb-3"><summary class="card-header d-flex justify-content-between align-items-center"><div><strong> </strong> <!></div> <div class="d-flex align-items-center"><div class="btn-group"><button type="button" class="btn btn-sm btn-outline-secondary">Edit</button> <button type="button" class="btn btn-sm btn-outline-danger">Remove</button></div> <small class="ms-3 text-muted">â–¼</small></div></summary> <div class="card-body"><h5 class="card-title">Causes</h5> <!> <h5 class="card-title">Hazard-Level Mitigations</h5> <!> <h5 class="card-title">Impacts</h5> <!></div></details>'),ya=d('<button class="btn btn-primary mb-3">Add Another Hazard</button> <!>',1),xa=d('<main class="container py-4"><h1 class="mb-3">Hazard Log</h1> <!></main>');function Fa(ft,ut){Pt(ut,!1);const[L,gt]=ta(),B=()=>Y(pt,"$project",L),tt=()=>Y(ra,"$impacts",L),at=()=>Y(aa,"$causes",L),q=()=>Y(sa,"$mitigations",L),J=Wt();function rt(m){return(m.hazardImpacts||[]).map(n=>{const g=tt().find(P=>P.id===n.impactID),O=ea(n);return{hi:n,core:g,risk:O}}).filter(n=>!!n.core)}console.log("project:",B()),console.log("impacts:",tt());function st(){_t(bt+"/workspace/hazard")}function ht(m){confirm("Are you sure you want to remove this hazard?")&&pt.update(n=>({...n,hazards:n.hazards.filter(g=>g.id!==m)}))}Qt(()=>B(),()=>{Vt(J,B().hazards||[])}),St(),Ot();var K=xa(),yt=i(e(K),2);{var xt=m=>{var n=oa(),g=i(R(n),2);F("click",g,st),o(m,n)},zt=m=>{var n=ya(),g=R(n),O=i(g,2);$(O,1,()=>t(J),C,(P,v)=>{var Q=ha(),S=e(Q),T=e(S),V=e(T),kt=e(V,!0);r(V);var et=i(V),Ht=i(et);{var It=s=>{var a=ia(),p=e(a);r(a),j((_,k)=>{Zt(a,`background-color: ${_??""};`),u(p,`Risk: ${k??""}`)},[()=>Z.getHighestRisk(t(v)).color,()=>Z.getHighestRisk(t(v)).rating],U),o(s,a)};b(Ht,s=>{Z.getHighestRisk(t(v)).rating&&s(It)})}r(T);var ot=i(T,2),it=e(ot),dt=e(it),wt=i(dt,2);r(it),Xt(2),r(ot),r(S);var nt=i(S,2),vt=i(e(nt),2);{var Rt=s=>{var a=la(),p=e(a),_=i(e(p));$(_,5,()=>t(v).causeIds,C,(k,h)=>{var H=G(),N=R(H);{var I=c=>{var l=va();const f=U(()=>at().find(z=>z.id===t(h)));var y=e(l),M=e(y,!0);r(y);var A=i(y),x=e(A);{var D=z=>{var w=G(),Lt=R(w);$(Lt,1,()=>t(f).mitigationIds,C,(qt,ct,Et)=>{var mt=G(),Ft=R(mt);{var Gt=W=>{var E=da();const Ut=U(()=>q().find(Jt=>Jt.id===t(ct)));var X=R(E),Yt=e(X,!0);r(X);var Bt=i(X,1,!0);j(()=>{u(Yt,t(Ut).description),u(Bt,Et<t(f).mitigationIds.length-1?", ":"")}),o(W,E)};b(Ft,W=>{q().find(E=>E.id===t(ct))&&W(Gt)})}o(qt,mt)}),o(z,w)},Ct=z=>{var w=na();o(z,w)};b(x,z=>{var w;(w=t(f).mitigationIds)!=null&&w.length?z(D):z(Ct,!1)})}r(A),r(l),j(()=>u(M,t(f).description)),o(c,l)};b(N,c=>{at().find(l=>l.id===t(h))&&c(I)})}o(k,H)}),r(_),r(p),r(a),o(s,a)},jt=s=>{var a=ca();o(s,a)};b(vt,s=>{var a;(a=t(v).causeIds)!=null&&a.length?s(Rt):s(jt,!1)})}var lt=i(vt,4);{var Nt=s=>{var a=pa(),p=e(a),_=i(e(p));$(_,5,()=>t(v).mitigationIds,C,(k,h)=>{var H=G(),N=R(H);{var I=c=>{var l=ma();const f=U(()=>q().find(A=>A.id===t(h)));var y=e(l),M=e(y,!0);r(y),r(l),j(()=>u(M,t(f).description)),o(c,l)};b(N,c=>{q().find(l=>l.id===t(h))&&c(I)})}o(k,H)}),r(_),r(p),r(a),o(s,a)},At=s=>{var a=_a();o(s,a)};b(lt,s=>{var a;(a=t(v).mitigationIds)!=null&&a.length?s(Nt):s(At,!1)})}var Dt=i(lt,4);{var Mt=s=>{var a=ua(),p=e(a),_=i(e(p));$(_,5,()=>rt(t(v)),C,(k,h)=>{let H=()=>t(h).core,N=()=>t(h).risk;var I=fa(),c=e(I),l=e(c,!0);r(c);var f=i(c),y=e(f);{var M=x=>{var D=Kt();j(()=>u(D,N().rating)),o(x,D)},A=x=>{var D=ba();o(x,D)};b(y,x=>{N()?x(M):x(A,!1)})}r(f),r(I),j(()=>u(l,H().description)),o(k,I)}),r(_),r(p),r(a),o(s,a)},$t=s=>{var a=ga();o(s,a)};b(Dt,s=>{rt(t(v)).length?s(Mt):s($t,!1)})}r(nt),r(Q),j(()=>{u(kt,t(v).id),u(et,`: ${t(v).description??""} `)}),F("click",dt,()=>_t(bt+`/workspace/hazard?id=${t(v).id}`)),F("click",wt,()=>ht(t(v).id)),o(P,Q)}),F("click",g,st),o(m,n)};b(yt,m=>{t(J).length===0?m(xt):m(zt,!1)})}r(K),o(ft,K),Tt(),gt()}export{Fa as component};
