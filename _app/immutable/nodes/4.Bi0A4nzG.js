import{f as d,a as i,e as T,c as Y,t as Ot}from"../chunks/BigRneoS.js";import"../chunks/DhYZTW0n.js";import{j as ut,p as Qt,l as St,b as Vt,t as z,a as Wt,s as o,c as e,e as Xt,m as Zt,r,d as t,f as A,n as ta,h as B}from"../chunks/Dp4XvV4q.js";import{s as b}from"../chunks/R0xEnjdg.js";import{i as f}from"../chunks/DUX-zM3N.js";import{e as F,i as G}from"../chunks/U-ZPKxaM.js";import{a as aa}from"../chunks/i5w7oQmI.js";import{i as ra}from"../chunks/DeQT2YmM.js";import{a as J,s as ea}from"../chunks/BFbgREId.js";import{p as gt}from"../chunks/B4aGxuZ6.js";import{c as sa}from"../chunks/mw76NlSF.js";import{i as ia,a as oa}from"../chunks/C7PnQIMN.js";import{m as da}from"../chunks/B7G4vysy.js";import{g as ht}from"../chunks/CC_0R2Wk.js";import{b as yt}from"../chunks/DoDhfopV.js";import{H as st}from"../chunks/Dtlf4xNg.js";function na(I,U,q,K){var N=I.__style;if(ut||N!==U){var D=aa(U);(!ut||D!==I.getAttribute("style"))&&(D==null?I.removeAttribute("style"):I.style.cssText=D),I.__style=U}return K}var va=d('<div class="alert alert-info" role="alert">You have not added any hazards yet. Get started by adding your first one.</div> <button class="btn btn-primary mt-3">Add First Hazard</button>',1),la=d('<span class="badge ms-2"> </span>'),ca=d("<span> </span> ",1),ma=d('<span class="text-muted">None</span>'),_a=d("<tr><td> </td><td><!></td></tr>"),pa=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th style="width:50%">Cause</th><th style="width:50%">Mitigations</th></tr></thead><tbody></tbody></table></div>'),ba=d('<p class="text-muted mb-3">No causes added.</p>'),fa=d("<tr><td> </td></tr>"),ua=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th>Mitigation</th></tr></thead><tbody></tbody></table></div>'),ga=d('<p class="text-muted">No mitigations added.</p>'),ha=d("<em>Not assessed</em>"),ya=d("<tr><td> </td><td><!></td></tr>"),xa=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th style="width:70%">Description</th><th style="width:30%">Risk Rating</th></tr></thead><tbody></tbody></table></div>'),ka=d('<p class="text-muted mb-3">No impacts added.</p>'),za=d('<details class="card mb-3"><summary class="card-header d-flex justify-content-between align-items-center"><div><strong> </strong> <!></div> <div class="d-flex align-items-center"><div class="btn-group"><button type="button" class="btn btn-sm btn-outline-secondary">Edit</button> <button type="button" class="btn btn-sm btn-outline-danger">Remove</button></div> <small class="ms-3 text-muted">â–¼</small></div></summary> <div class="card-body"><h5 class="card-title">Causes</h5> <!> <h5 class="card-title">Hazard-Level Mitigations</h5> <!> <h5 class="card-title">Impacts</h5> <!></div></details>'),Ia=d('<button class="btn btn-primary mb-3">Add Another Hazard</button> <!>',1),Ha=d('<main class="container py-4"><h1 class="mb-3"> </h1> <!></main>');function Ta(I,U){Qt(U,!1);const[q,K]=ea(),N=()=>J(gt,"$project",q),D=()=>J(ia,"$impacts",q),it=()=>J(sa,"$causes",q),L=()=>J(da,"$mitigations",q),O=Zt();function ot(m){return(m.hazardImpacts||[]).map(n=>{const g=D().find(W=>W.id===n.impactID),V=oa(n);return{hi:n,core:g,risk:V}}).filter(n=>!!n.core)}console.log("project:",N()),console.log("impacts:",D());function dt(){ht(yt+"/workspace/hazard")}function xt(m){confirm("Are you sure you want to remove this hazard?")&&gt.update(n=>({...n,hazards:n.hazards.filter(g=>g.id!==m)}))}St(()=>N(),()=>{Xt(O,N().hazards||[])}),Vt(),ra();var Q=Ha(),S=e(Q),kt=e(S,!0);r(S);var zt=o(S,2);{var It=m=>{var n=va(),g=o(A(n),2);T("click",g,dt),i(m,n)},Ht=m=>{var n=Ia(),g=A(n),V=o(g,2);F(V,1,()=>t(O),G,(W,v)=>{var X=za(),Z=e(X),tt=e(Z),at=e(tt),wt=e(at,!0);r(at);var nt=o(at),jt=o(nt);{var Rt=s=>{var a=la(),_=e(a);r(a),z((p,H)=>{na(a,`background-color: ${p??""};`),b(_,`Risk: ${H??""}`)},[()=>st.getHighestRisk(t(v)).color,()=>st.getHighestRisk(t(v)).rating],B),i(s,a)};f(jt,s=>{st.getHighestRisk(t(v)).rating&&s(Rt)})}r(tt);var vt=o(tt,2),lt=e(vt),ct=e(lt),At=o(ct,2);r(lt),ta(2),r(vt),r(Z);var mt=o(Z,2),_t=o(e(mt),2);{var Nt=s=>{var a=pa(),_=e(a),p=o(e(_));F(p,5,()=>t(v).causeIds,G,(H,h)=>{var w=Y(),M=A(w);{var j=c=>{var l=_a();const u=B(()=>it().find(k=>k.id===t(h)));var y=e(l),E=e(y,!0);r(y);var $=o(y),x=e($);{var C=k=>{var R=Y(),Ft=A(R);F(Ft,1,()=>t(u).mitigationIds,G,(Gt,bt,Lt)=>{var ft=Y(),Pt=A(ft);{var Tt=rt=>{var P=ca();const Yt=B(()=>L().find(Kt=>Kt.id===t(bt)));var et=A(P),Bt=e(et,!0);r(et);var Jt=o(et,1,!0);z(()=>{b(Bt,t(Yt).description),b(Jt,Lt<t(u).mitigationIds.length-1?", ":"")}),i(rt,P)};f(Pt,rt=>{L().find(P=>P.id===t(bt))&&rt(Tt)})}i(Gt,ft)}),i(k,R)},Et=k=>{var R=ma();i(k,R)};f(x,k=>{var R;(R=t(u).mitigationIds)!=null&&R.length?k(C):k(Et,!1)})}r($),r(l),z(()=>b(E,t(u).description)),i(c,l)};f(M,c=>{it().find(l=>l.id===t(h))&&c(j)})}i(H,w)}),r(p),r(_),r(a),i(s,a)},Dt=s=>{var a=ba();i(s,a)};f(_t,s=>{var a;(a=t(v).causeIds)!=null&&a.length?s(Nt):s(Dt,!1)})}var pt=o(_t,4);{var Mt=s=>{var a=ua(),_=e(a),p=o(e(_));F(p,5,()=>t(v).mitigationIds,G,(H,h)=>{var w=Y(),M=A(w);{var j=c=>{var l=fa();const u=B(()=>L().find($=>$.id===t(h)));var y=e(l),E=e(y,!0);r(y),r(l),z(()=>b(E,t(u).description)),i(c,l)};f(M,c=>{L().find(l=>l.id===t(h))&&c(j)})}i(H,w)}),r(p),r(_),r(a),i(s,a)},$t=s=>{var a=ga();i(s,a)};f(pt,s=>{var a;(a=t(v).mitigationIds)!=null&&a.length?s(Mt):s($t,!1)})}var Ct=o(pt,4);{var Ut=s=>{var a=xa(),_=e(a),p=o(e(_));F(p,5,()=>ot(t(v)),G,(H,h)=>{let w=()=>t(h).core,M=()=>t(h).risk;var j=ya(),c=e(j),l=e(c,!0);r(c);var u=o(c),y=e(u);{var E=x=>{var C=Ot();z(()=>b(C,M().rating)),i(x,C)},$=x=>{var C=ha();i(x,C)};f(y,x=>{M()?x(E):x($,!1)})}r(u),r(j),z(()=>b(l,w().description)),i(H,j)}),r(p),r(_),r(a),i(s,a)},qt=s=>{var a=ka();i(s,a)};f(Ct,s=>{ot(t(v)).length?s(Ut):s(qt,!1)})}r(mt),r(X),z(()=>{b(wt,t(v).id),b(nt,`: ${t(v).description??""} `)}),T("click",ct,()=>ht(yt+`/workspace/hazard?id=${t(v).id}`)),T("click",At,()=>xt(t(v).id)),i(W,X)}),T("click",g,dt),i(m,n)};f(zt,m=>{t(O).length===0?m(It):m(Ht,!1)})}r(Q),z(()=>b(kt,N().title||"Untitled Project")),i(I,Q),Wt(),K()}export{Ta as component};
