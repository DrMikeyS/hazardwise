import{f as A,e as D,a as B,r as C}from"../chunks/DA4zlYT6.js";import{i as E}from"../chunks/Bv-0c6t3.js";import{a as Y}from"../chunks/BOTc4DbH.js";import{p as j,t as q,g as t,a as F,s as c,d as m,m as z,c as d,i as G,r as l,n as H}from"../chunks/Dh6mP1wG.js";import{s as _}from"../chunks/DvvhDkJs.js";import{b as J}from"../chunks/ByEUdlhv.js";import{p as b}from"../chunks/D0ugsqkT.js";import{p as K}from"../chunks/CD6oGcH5.js";import{c as L}from"../chunks/SP2ZwDGS.js";import{m as w}from"../chunks/5zig9VdD.js";import{g as p}from"../chunks/BsPCPuPp.js";import{b as u}from"../chunks/C9Pz-73a.js";var N=A('<main class="container py-4"><button class="btn btn-link mb-3">‚Üê Back</button> <h1 class="mb-4"> </h1> <div class="mb-3"><label for="mitigationDescription" class="form-label">Mitigation Description</label> <div class="form-text mb-2">Describe the control or action that reduces the likelihood or impact of harm.</div> <textarea id="mitigationDescription" class="form-control" rows="3"></textarea> <div class="form-text">A mitigation is an action or control that reduces the likelihood or impact of a hazard or cause. e.g. "Staff are advised not to carry uncovered drinks to prevent spills.".</div></div> <button class="btn btn-success"> </button></main>');function ea(M,S){j(S,!1);let r=null,o=null,i=z(null),n=z("");Y(()=>{if(r=b.url.searchParams.get("hazardID"),o=b.url.searchParams.get("causeID"),m(i,b.url.searchParams.get("mitigationID")),!r&&!o&&(alert("You must specify either a hazard or cause."),p(u+"/workspace/hazards")),t(i)){const e=G(w).find(a=>a.id===t(i));e&&m(n,e.description)}});function I(){o?p(u+`/workspace/hazard/cause?hazardID=${r}&causeID=${o}`):r?p(u+`/workspace/hazard?id=${r}`):p(u+"/workspace/hazards")}function $(){w.update(e=>{if(t(i))return e.map(a=>a.id===t(i)?{...a,description:t(n)}:a);{const a=e.length+1,s=`M${String(a).padStart(2,"0")}`;return m(i,s),[...e,{id:s,description:t(n)}]}}),t(i)&&(o?L.update(e=>e.map(a=>{var s;return a.id===o&&!((s=a.mitigationIds)!=null&&s.includes(t(i)))?{...a,mitigationIds:[...a.mitigationIds||[],t(i)]}:a})):r&&K.update(e=>({...e,hazards:e.hazards.map(a=>{var s;return a.id===r&&!((s=a.mitigationIds)!=null&&s.includes(t(i)))?{...a,mitigationIds:[...a.mitigationIds||[],t(i)]}:a})}))),I()}E();var f=N(),x=d(f),g=c(x,2),y=d(g,!0);l(g);var h=c(g,2),k=c(d(h),4);C(k),H(2),l(h);var v=c(h,2),P=d(v,!0);l(v),l(f),q(()=>{_(y,t(i)?"Edit Mitigation":"Add Mitigation"),_(P,t(i)?"Save Changes":"Save Mitigation")}),D("click",x,I),J(k,()=>t(n),e=>m(n,e)),D("click",v,$),B(M,f),F()}export{ea as component};
