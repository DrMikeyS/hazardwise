import{f as d,a as o,c as T,t as Ot}from"../chunks/D_RzRloE.js";import"../chunks/DlkhPo0f.js";import{h as ut,p as Qt,l as St,b as Vt,t as z,a as Wt,s as i,c as e,d as Xt,m as Zt,r,g as t,f as A,n as ta,e as Y}from"../chunks/q1fHjrPM.js";import{s as b}from"../chunks/DFReBX1E.js";import{i as f}from"../chunks/BPmOuZDw.js";import{e as F,i as G}from"../chunks/DLTYB1tx.js";import{e as B}from"../chunks/DiVBmCPK.js";import{a as aa}from"../chunks/i5w7oQmI.js";import{i as ra}from"../chunks/BpamrcWA.js";import{a as J,s as ea}from"../chunks/0RoxKub5.js";import{p as gt}from"../chunks/D2aCM8w_.js";import{c as sa}from"../chunks/DYbJMsu3.js";import{i as oa}from"../chunks/C5hiBbar.js";import{m as ia}from"../chunks/Cbw1HFvZ.js";import{g as ht}from"../chunks/DgyA4w_O.js";import{b as yt}from"../chunks/DmsLzvgA.js";import{H as st}from"../chunks/CuPwGgHW.js";import{a as da}from"../chunks/BoGFcRCe.js";function na(I,U,q,K){var N=I.__style;if(ut||N!==U){var D=aa(U);(!ut||D!==I.getAttribute("style"))&&(D==null?I.removeAttribute("style"):I.style.cssText=D),I.__style=U}return K}var va=d('<div class="alert alert-info" role="alert">You have not added any hazards yet. Get started by adding your first one.</div> <button class="btn btn-primary mt-3">Add First Hazard</button>',1),la=d('<span class="badge ms-2"> </span>'),ca=d("<span> </span> ",1),ma=d('<span class="text-muted">None</span>'),pa=d("<tr><td> </td><td><!></td></tr>"),_a=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th style="width:50%">Cause</th><th style="width:50%">Mitigations</th></tr></thead><tbody></tbody></table></div>'),ba=d('<p class="text-muted mb-3">No causes added.</p>'),fa=d("<tr><td> </td></tr>"),ua=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th>Mitigation</th></tr></thead><tbody></tbody></table></div>'),ga=d('<p class="text-muted">No mitigations added.</p>'),ha=d("<em>Not assessed</em>"),ya=d("<tr><td> </td><td><!></td></tr>"),xa=d('<div class="table-responsive mb-3"><table class="table table-sm table-bordered"><thead><tr><th style="width:70%">Description</th><th style="width:30%">Risk Rating</th></tr></thead><tbody></tbody></table></div>'),ka=d('<p class="text-muted mb-3">No impacts added.</p>'),za=d('<details class="card mb-3"><summary class="card-header d-flex justify-content-between align-items-center"><div><strong> </strong> <!></div> <div class="d-flex align-items-center"><div class="btn-group"><button type="button" class="btn btn-sm btn-outline-secondary">Edit</button> <button type="button" class="btn btn-sm btn-outline-danger">Remove</button></div> <small class="ms-3 text-muted">â–¼</small></div></summary> <div class="card-body"><h5 class="card-title">Causes</h5> <!> <h5 class="card-title">Hazard-Level Mitigations</h5> <!> <h5 class="card-title">Impacts</h5> <!></div></details>'),Ia=d('<button class="btn btn-primary mb-3">Add Another Hazard</button> <!>',1),Ha=d('<main class="container py-4"><h1 class="mb-3"> </h1> <!></main>');function Ba(I,U){Qt(U,!1);const[q,K]=ea(),N=()=>J(gt,"$project",q),D=()=>J(oa,"$impacts",q),ot=()=>J(sa,"$causes",q),L=()=>J(ia,"$mitigations",q),O=Zt();function it(m){return(m.hazardImpacts||[]).map(n=>{const g=D().find(W=>W.id===n.impactID),V=da(n);return{hi:n,core:g,risk:V}}).filter(n=>!!n.core)}console.log("project:",N()),console.log("impacts:",D());function dt(){ht(yt+"/workspace/hazard")}function xt(m){confirm("Are you sure you want to remove this hazard?")&&gt.update(n=>({...n,hazards:n.hazards.filter(g=>g.id!==m)}))}St(()=>N(),()=>{Xt(O,N().hazards||[])}),Vt(),ra();var Q=Ha(),S=e(Q),kt=e(S,!0);r(S);var zt=i(S,2);{var It=m=>{var n=va(),g=i(A(n),2);B("click",g,dt),o(m,n)},Ht=m=>{var n=Ia(),g=A(n),V=i(g,2);F(V,1,()=>t(O),G,(W,v)=>{var X=za(),Z=e(X),tt=e(Z),at=e(tt),wt=e(at,!0);r(at);var nt=i(at),Rt=i(nt);{var jt=s=>{var a=la(),p=e(a);r(a),z((_,H)=>{na(a,`background-color: ${_??""};`),b(p,`Risk: ${H??""}`)},[()=>st.getHighestRisk(t(v)).color,()=>st.getHighestRisk(t(v)).rating],Y),o(s,a)};f(Rt,s=>{st.getHighestRisk(t(v)).rating&&s(jt)})}r(tt);var vt=i(tt,2),lt=e(vt),ct=e(lt),At=i(ct,2);r(lt),ta(2),r(vt),r(Z);var mt=i(Z,2),pt=i(e(mt),2);{var Nt=s=>{var a=_a(),p=e(a),_=i(e(p));F(_,5,()=>t(v).causeIds,G,(H,h)=>{var w=T(),M=A(w);{var R=c=>{var l=pa();const u=Y(()=>ot().find(k=>k.id===t(h)));var y=e(l),E=e(y,!0);r(y);var $=i(y),x=e($);{var C=k=>{var j=T(),Ft=A(j);F(Ft,1,()=>t(u).mitigationIds,G,(Gt,bt,Lt)=>{var ft=T(),Pt=A(ft);{var Tt=rt=>{var P=ca();const Yt=Y(()=>L().find(Kt=>Kt.id===t(bt)));var et=A(P),Bt=e(et,!0);r(et);var Jt=i(et,1,!0);z(()=>{b(Bt,t(Yt).description),b(Jt,Lt<t(u).mitigationIds.length-1?", ":"")}),o(rt,P)};f(Pt,rt=>{L().find(P=>P.id===t(bt))&&rt(Tt)})}o(Gt,ft)}),o(k,j)},Et=k=>{var j=ma();o(k,j)};f(x,k=>{var j;(j=t(u).mitigationIds)!=null&&j.length?k(C):k(Et,!1)})}r($),r(l),z(()=>b(E,t(u).description)),o(c,l)};f(M,c=>{ot().find(l=>l.id===t(h))&&c(R)})}o(H,w)}),r(_),r(p),r(a),o(s,a)},Dt=s=>{var a=ba();o(s,a)};f(pt,s=>{var a;(a=t(v).causeIds)!=null&&a.length?s(Nt):s(Dt,!1)})}var _t=i(pt,4);{var Mt=s=>{var a=ua(),p=e(a),_=i(e(p));F(_,5,()=>t(v).mitigationIds,G,(H,h)=>{var w=T(),M=A(w);{var R=c=>{var l=fa();const u=Y(()=>L().find($=>$.id===t(h)));var y=e(l),E=e(y,!0);r(y),r(l),z(()=>b(E,t(u).description)),o(c,l)};f(M,c=>{L().find(l=>l.id===t(h))&&c(R)})}o(H,w)}),r(_),r(p),r(a),o(s,a)},$t=s=>{var a=ga();o(s,a)};f(_t,s=>{var a;(a=t(v).mitigationIds)!=null&&a.length?s(Mt):s($t,!1)})}var Ct=i(_t,4);{var Ut=s=>{var a=xa(),p=e(a),_=i(e(p));F(_,5,()=>it(t(v)),G,(H,h)=>{let w=()=>t(h).core,M=()=>t(h).risk;var R=ya(),c=e(R),l=e(c,!0);r(c);var u=i(c),y=e(u);{var E=x=>{var C=Ot();z(()=>b(C,M().rating)),o(x,C)},$=x=>{var C=ha();o(x,C)};f(y,x=>{M()?x(E):x($,!1)})}r(u),r(R),z(()=>b(l,w().description)),o(H,R)}),r(_),r(p),r(a),o(s,a)},qt=s=>{var a=ka();o(s,a)};f(Ct,s=>{it(t(v)).length?s(Ut):s(qt,!1)})}r(mt),r(X),z(()=>{b(wt,t(v).id),b(nt,`: ${t(v).description??""} `)}),B("click",ct,()=>ht(yt+`/workspace/hazard?id=${t(v).id}`)),B("click",At,()=>xt(t(v).id)),o(W,X)}),B("click",g,dt),o(m,n)};f(zt,m=>{t(O).length===0?m(It):m(Ht,!1)})}r(Q),z(()=>b(kt,N().title||"Untitled Project")),o(I,Q),Wt(),K()}export{Ba as component};
