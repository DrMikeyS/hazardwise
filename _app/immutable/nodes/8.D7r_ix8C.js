import{f as y,e as k,a as B,r as C}from"../chunks/BigRneoS.js";import"../chunks/DhYZTW0n.js";import{p as E,o as Y,t as j,d as t,a as q,s as m,c,e as d,m as _,g as F,r as l,n as G}from"../chunks/Dp4XvV4q.js";import{s as z}from"../chunks/R0xEnjdg.js";import{b as H}from"../chunks/BcZp7PTO.js";import{i as J}from"../chunks/DeQT2YmM.js";import{p as v}from"../chunks/CMg1VSn_.js";import{p as K}from"../chunks/B4aGxuZ6.js";import{c as L}from"../chunks/mw76NlSF.js";import{m as w}from"../chunks/B7G4vysy.js";import{g as p}from"../chunks/CC_0R2Wk.js";import{b as u}from"../chunks/DoDhfopV.js";var N=y('<main class="container py-4"><button class="btn btn-link mb-3">‚Üê Back</button> <h1 class="mb-4"> </h1> <div class="mb-3"><label for="mitigationDescription" class="form-label">Mitigation Description</label> <textarea id="mitigationDescription" class="form-control" rows="3" placeholder="e.g. Add human review step"></textarea> <div class="form-text">A mitigation is an action or control that reduces the likelihood or impact of a hazard or cause.</div></div> <button class="btn btn-success"> </button></main>');function ea(M,S){E(S,!1);let r=null,o=null,i=_(null),n=_("");Y(()=>{if(r=v.url.searchParams.get("hazardID"),o=v.url.searchParams.get("causeID"),d(i,v.url.searchParams.get("mitigationID")),!r&&!o&&(alert("You must specify either a hazard or cause."),p(u+"/workspace")),t(i)){const e=F(w).find(a=>a.id===t(i));e&&d(n,e.description)}});function I(){o?p(u+`/workspace/hazard/cause?hazardID=${r}&causeID=${o}`):r?p(u+`/workspace/hazard?id=${r}`):p(u+"/workspace")}function $(){w.update(e=>{if(t(i))return e.map(a=>a.id===t(i)?{...a,description:t(n)}:a);{const a=e.length+1,s=`M${String(a).padStart(2,"0")}`;return d(i,s),[...e,{id:s,description:t(n)}]}}),t(i)&&(o?L.update(e=>e.map(a=>{var s;return a.id===o&&!((s=a.mitigationIds)!=null&&s.includes(t(i)))?{...a,mitigationIds:[...a.mitigationIds||[],t(i)]}:a})):r&&K.update(e=>({...e,hazards:e.hazards.map(a=>{var s;return a.id===r&&!((s=a.mitigationIds)!=null&&s.includes(t(i)))?{...a,mitigationIds:[...a.mitigationIds||[],t(i)]}:a})}))),I()}J();var f=N(),x=c(f),g=m(x,2),A=c(g,!0);l(g);var h=m(g,2),D=m(c(h),2);C(D),G(2),l(h);var b=m(h,2),P=c(b,!0);l(b),l(f),j(()=>{z(A,t(i)?"Edit Mitigation":"Add Mitigation"),z(P,t(i)?"Save Changes":"Save Mitigation")}),k("click",x,I),H(D,()=>t(n),e=>d(n,e)),k("click",b,$),B(M,f),q()}export{ea as component};
